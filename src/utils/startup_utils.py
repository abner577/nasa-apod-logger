from src.nasa_client import *


def startup_banner():
    print(r"""                       _      _                             
  __ _ _ __   ___   __| |    | | ___   __ _  __ _  ___ _ __ 
 / _` | '_ \ / _ \ / _` |    | |/ _ \ / _` |/ _` |/ _ \ '__|
| (_| | |_) | (_) | (_| |    | | (_) | (_| | (_| |  __/ |   
 \__,_| .__/ \___/ \__,_|    |_|\___/ \__, |\__, |\___|_|   
      |_|                             |___/ |___/           """)


def startup_art():
    print(r"""....................................................................................................
....................................................................................................
....-====--:........................................................................................
..-@@@@@@@@@@@%*+=-.......................::-=++****++==-:..........................................
..+@@@@@@@@@@@@@@@@@%*=::.............-+#@@@@@@@@@@@@@@@@@@#+-:.....................................
...#@@@@@@@@@%%%%@@@@@@@@%*=:......=#@@@@@@@@@@@@@@@@@@@@@@@@@@#=:..................................
....+@@@@@@%-.......-+*#@@@@@@#--*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#-................................
.....-%@@@@@=.............-*##+#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%-..............................
.......+@@@@@+..............:*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#:............................
........:*@@@@#-...........-%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=...........................
..........:*@@@@*-........=@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+:.........................
.............*@@@@#:.....=@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+.........................
...............+%@@@%:..-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=........................
.................-%@@@@=-%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%:.......................
....................*@@@@#-*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+:......................
......................:%@@@@=-%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%:......................
......................:@==@@@@#-+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-......................
......................:@@@%-+@@@@#-#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=......................
......................:@@@@@@#=#@@@@*-#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=......................
.......................@@@@@@@@@*=#@@@@*:#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-......................
.......................#@@@@@@@@@@@*=%@@@@#-*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%:......................
.......................=@@@@@@@@@@@@@@*-#@@@@#=+@@@@@@@@@@@@@@@@@@@@@@@@@@@@+*%*....................
........................%@@@@@@@@@@@@@@@%#=*@@@@%++%@@@@@@@@@@@@@@@@@@@@@@@%-%@@@#:.................
........................-@@@@@@@@@@@@@@@@@@@#++@@@@%*=*@@@@@@@@@@@@@@@@@@@@=..-%@@@%+...............
.........................=@@@@@@@@@@@@@@@@@@@@@%*+#@@@@#+=#@@@@@@@@@@@@@@@+.....:#@@@%+.............
..........................=@@@@@@@@@@@@@@@@@@@@@@@%*+*@@@@%#==#@@@@@@@@@@+........:*@@@@*:..........
...........................=%@@@@@@@@@@@@@@@@@@@@@@@@%#++#@@@@%*++#@@@@%=...........-%@@@@+:........
............................:*@@@@@@@@@@@@@@@@@@@@@@@@@@@%*=+%@@@@%#+==:..............+@@@@@+.......
..............................-#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#*=+%@@@@%#+-.............=@@@@@%-.....
................................-*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#=-+#@@@@@%#*=-.......-%@@@@@@+:...
..................................:=#@@@@@@@@@@@@@@@@@@@@@@@@@@#=:.....:=*%@@@@@@@%%##%@@@@@@@@@#:..
.....................................:-+#@@@@@@@@@@@@@@@@@@#*=.............:-+*%@@@@@@@@@@@@@@@@@+..
...........................................-==+******++=-:.......................-=+*%@@@@@@@@@@@=..
.......................................................................................:-==++++=:...
....................................................................................................""")



def nasa_apods_menu():
    flag = True
    while flag:
        print(
            "\n======================= NASA APOD Requests üåå =======================\n"
            "Fetch Astronomy Picture of the Day (APOD) entries from NASA.\n")
        print("Select an option (1-4):")

        try:
            user_choice = int(input(
                "1. Today‚Äôs APOD\n"
                "2. APOD by date\n"
                "3. Random APODs\n"
                "4. Return to Main Menu\n"
            ))
        except ValueError:
            print("Invalid input: Please enter a number from 1 to 4.")
            continue
        except Exception as e:
            print(e)
            return

        match user_choice:
            case 1:
                get_todays_apod()
            case 2:
                get_apod_for_specific_day()
            case 3:
                get_random_n_apods()
            case 4:
                print("\nReturning to Main Menu...")
                flag = False


def output_files_menu():
    flag = True
    while flag:
        print(
            "\n======================= Log & File Tools üóÉÔ∏è =======================\n"
            "View, manage, and maintain your saved APOD logs.\n")
        print("Select an option (1-9):")

        try:
            user_choice = int(input(
                "1. View first N entries\n"
                "2. View last N entries\n"
                "3. View all entries\n"
                "4. Delete entry by date\n"
                "5. Show most recent entry (by date)\n"
                "6. Show oldest entry (by date)\n"
                "7. Clear logs (CSV + JSONL)\n"
                "8. Count logged entries\n"
                "9. Return to Main Menu\n"
            ))
        except ValueError:
            print("Invalid input: Please enter a number from 1 to 9.")
            return
        except Exception as e:
            print(e)
            return

        match user_choice:
            case 1:
                show_first_n_json_log_entries()
            case 2:
                show_last_n_json_log_entries()
            case 3:
                show_all_json_entries()
            case 4:
                delete_one_json_entry()
            case 5:
                fetch_most_recent_json_apod()
            case 6:
                fetch_oldest_json_apod()
            case 7:
                if clear_json_output_file() and clear_csv_output_file():
                    print("\nAll log files have been cleared.\n")
            case 8:
                line_count = get_line_count(0)
                print(f"\nTotal logged entries: {line_count}\n")
            case 9:
                print("\nReturning to Main Menu...")
                flag = False


def user_settings_menu():
    flag = True
    while flag:
        print(
            "\n======================= Preferences üìÉ =======================\n"
            "Manage how the app behaves after fetching APOD entries.\n")
        print("Select an option (1-3):")

        try:
            user_choice = int(input(
                "1. View auto-open setting\n"
                "2. Change auto-open setting\n"
                "3. Return to Main Menu\n"
            ))
        except ValueError:
            print("Invalid input: Please enter a number from 1 to 3.")
            return
        except Exception as e:
            print(e)
            return

        match user_choice:
            case 1:
                if get_user_settings():
                    print("\nAuto-open in browser: ON ‚úÖ")
                else:
                    print("\nAuto-open in browser: OFF ‚ùå")
            case 2:
                update_user_settings()
            case 3:
                print("\nReturning to Main Menu...")
                flag = False
